let count = 0;
    const days = ["السبت", "الأحد", "الإثنين", "الثلاثاء", "الأربعاء", "الخميس", "الجمعة"];

    function addCount() {
        count++;
        document.getElementById('counter').innerText = count;
        if(navigator.vibrate) navigator.vibrate(50);
        
        // تجهيز الصوت في الخلفية مع أول ضغطة
        const audio = document.getElementById('azanAudio');
        if (audio.paused) {
            audio.play().then(() => {
                audio.pause();
                audio.currentTime = 0;
            }).catch(e => console.log("تحضير الصوت"));
        }
    }

    // دالة تشغيل الأذان الصافية (بدون تنبيهات)
    function playAzan() {
        const audio = document.getElementById('azanAudio');
        audio.play().catch(e => {
            console.log("المتصفح يحتاج تفاعل أولاً");
        });
    }

    function resetCounter() { count = 0; document.getElementById('counter').innerText = 0; }
    function setZekr(z) { document.getElementById('zekrName').innerText = z; resetCounter(); }

    function showPage(p) {
        document.getElementById('subhaPage').style.display = p === 'subha' ? 'block' : 'none';
        document.getElementById('prayerPage').style.display = p === 'prayer' ? 'block' : 'none';
        document.getElementById('navSubha').className = p === 'subha' ? 'active' : '';
        document.getElementById('navPrayer').className = p === 'prayer' ? 'active' : '';
    }

    // كود التثبيت (الزرار الأخضر)
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        document.getElementById('installBtn').style.display = 'block';
    });

    function handleInstall() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(() => {
                document.getElementById('installBtn').style.display = 'none';
                deferredPrompt = null;
            });
        }
    }

    const tb = document.getElementById('tableBody');
    days.forEach(d => {
        tb.innerHTML += `<tr><td style="color:gold">${d}</td><td>04:30</td><td>03:20</td><td>06:10</td></tr>`;
    });

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
    }
